<!DOCTYPE html>
<html>
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="initial-scale=1, width=device-width, maximum-scale=1, user-scalable=no"/>
	<title>实名认证</title>
	<meta name="description" content="">
	<meta name="keywords" content="">
	<link rel="stylesheet" href="css/common.css">
	<link rel="stylesheet" href="css/use.css">
	</head>
	<body>
		<header>
	<h3 class="tc lhbg">
		<i class="go"></i>
		修改资料
	</h3>
</header>
		<div class="main realName">
			<form action="">
				<ul class="real-item">
					<li class="fix selection">
						<label>证件类型</label>
						<input type="text"placeholder="身份证">
						<i></i>
						<ul class="tc">
							<li id="1">身份证1</li>
							<li id="2">身份证2</li>
							<li id="3">身份证3</li>
						</ul>
					</li>
					<li class="fix">
						<label>真实姓名</label>
						<input type="text"placeholder="请输入真实姓名">
					</li>
					<li class="fix">
						<label>证件号码</label>
						<input type="text"placeholder="请输入证件号码">
					</li>
				</ul>
				<ul class="upload">
					<li class="flex-box">
						<div class="flex-1 item">
							<img class="addImg" onclick="clickImg(this);" src="images/add.png">
							<h4 class="tc">上传身份证正面照片</h4>
							<input name="url" type="file" class="upload_input" onchange="change(this)">
							<div class="preBlock">
								<img class="preview" id="preview" alt="" name="pic">
							</div>
							<img class="delete" onclick="deleteImg(this)" src="images/del.png">
						</div>
						<img src="images/front.png" class="example">
					</li>
					<li class="flex-box">
						<div class="flex-1 item">
							<img class="addImg" onclick="clickImg(this);" src="images/add.png">
							<h4 class="tc">上传身份证反面照片</h4>
							<input name="url" type="file" class="upload_input" onchange="change(this)">
							<div class="preBlock">
								<img class="preview" id="preview" alt="" name="pic">
							</div>
							<img class="delete" onclick="deleteImg(this)" src="images/del.png">
						</div>
						<img src="images/back.png" class="example">
					</li>
					<li class="flex-box">
						<div class="flex-1 item">
							<img class="addImg" onclick="clickImg(this);" src="images/add.png">
							<h4 class="tc">上面手持身份证及ID照片</h4>
							<input name="url" type="file" class="upload_input" onchange="change(this)">
							<div class="preBlock">
								<img class="preview" id="preview" alt="" name="pic">
							</div>
							<img class="delete" onclick="deleteImg(this)" src="images/del.png">
						</div>
						<img src="images/inhand.png" class="example">
					</li>
				</ul>
				<p class="tc"><button class="lhbg mod-btn">提交验证</button></p>
			</form>
		</div>
	</body>
	<script src="js/set.js"></script>
	<script src="js/jquery-1.8.2.min.js"></script>
	<script>
		$(function(){
			$('.selection i').removeClass('active');
			$('.selection ul').hide();
			$('.selection input').click(function () {
				$(this).siblings('ul').toggle();
				$(this).siblings('i').toggleClass("active");
			})
			$('.selection ul li').click(function () {
				$(this).parent().hide();
				$(this).addClass('hv').siblings().removeClass('hv');
				$(this).parent().siblings('input').val($(this).text());
				$(this).parent().siblings('input').attr('id',$(this).attr('id'));
				$(this).parent().siblings('i').removeClass('active');
			})

		});
	</script>
	<script type="text/javascript">
			var clickImg = function(obj){  //点击
			$(obj).parent().find('.upload_input').click();
		}
		//删除
		var deleteImg = function(obj){
			$(obj).parent().find('input').val('');
			$(obj).parent().find('img.preview').attr("src","");
			//IE9以下
			$(obj).parent().find('img.preview').css("filter","");
			$(obj).hide();
			$(obj).parent().find('.addImg').show();
		}
		//选择图片
		function change(file) {
		//预览
			var pic = $(file).parent().find(".preview");
			//添加按钮
			var addImg = $(file).parent().find(".addImg");
			//删除按钮
			var deleteImg = $(file).parent().find(".delete");
			var ext=file.value.substring(file.value.lastIndexOf(".")+1).toLowerCase();
			// gif在IE浏览器暂时无法显示
			if(ext!='png'&&ext!='jpg'&&ext!='jpeg'){
				if (ext != '') {
				alert("图片的格式必须为png或者jpg或者jpeg格式！"); 
				}
			return;
			}
			//判断IE版本
			var isIE = navigator.userAgent.match(/MSIE/)!= null,
				isIE6 = navigator.userAgent.match(/MSIE 6.0/)!= null;
				isIE10 = navigator.userAgent.match(/MSIE 10.0/)!= null;
			if(isIE && !isIE10) {
				file.select();
				var reallocalpath = document.selection.createRange().text;
				if (isIE6) {
					pic.attr("src",reallocalpath);
				}else{
					pic.css("filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod='scale',src=\"" + reallocalpath + "\")");
					pic.attr('src','data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==')
				}
				addImg.hide();
				deleteImg.show();
			}else {
				html5Reader(file,pic,addImg,deleteImg);
			}
		}
	 //H5渲染
		function html5Reader(file,pic,addImg,deleteImg){
			var file = file.files[0];
			var reader = new FileReader();
			reader.readAsDataURL(file);
			reader.onload = function(e){
				pic.attr("src",this.result);
			}
			addImg.hide();
			deleteImg.show();
		}
	</script>
</html>